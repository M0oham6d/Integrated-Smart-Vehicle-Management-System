/*
 * Control_Car_Using_Bluetooth.c
 *
 *  Created on: Dec 15, 2024
 *      Author: Muhammed Ayman
 */

#include "../HAL/motor.h"
#include "../MCAL/uart.h"
#include "../Standard_Types/standard_types.h"
#include <stdlib.h>
#include <util/delay.h>

/*uint8 motorSpeed(uint8 speed)
{
	switch(speed)
	{
	case '1':
		return 50;
		break;
	case '2':
		return 75;
		break;
	case '3':
		return 100;
		break;
	}
}*/

int main(void)
{
	uint8 recievedMSG;

	DcMotor_Init();

	UART_ConfigType uart_configratoin = {9600, UART_Parity_NONE, UART_STOP_1_BIT, MODE_EIGHT_BIT};
	UART_init(&uart_configratoin);

	while(1)
	{
		recievedMSG = UART_receiveByte();

		switch(recievedMSG)
		{
		case 'F':
			_delay_ms(20);
			while(UART_receiveByte() == 'F')
			{
				Forward();
			}
			Stop();
			break;
		case 'B':
			_delay_ms(20);
			while(UART_receiveByte() == 'B')
			{
				Backward();
			}
			Stop();
			break;
		case 'S':
			Stop();
			break;
		case 'R':
			_delay_ms(20);
			while(UART_receiveByte() == 'R')
			{
				Right_Forward();
			}
			Stop();
			break;
		case 'L':
			_delay_ms(20);
			while(UART_receiveByte() == 'L')
			{
				Left_Forward();
			}
			Stop();
			break;
		}
	}

	return 0;
}
